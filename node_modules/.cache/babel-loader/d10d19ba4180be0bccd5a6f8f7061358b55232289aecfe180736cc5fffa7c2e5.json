{"ast":null,"code":"var _jsxFileName = \"/Users/jasminezeng/Downloads/jasmine_ironfly/my-app/src/components/Board.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Cell from \"./Cell\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Board({\n  height,\n  width,\n  mines,\n  gameStatus\n}) {\n  _s();\n  const [grid, setGrid] = useState(getInitialState());\n  useEffect(() => {\n    setGrid(getInitialState());\n  }, [height, width, mines, gameStatus]);\n  function getInitialState() {\n    const initialState = {\n      grid: createNewBoard(),\n      minesCount: mines,\n      gameStatus: gameStatus,\n      revealedCells: 0\n    };\n    return initialState;\n  }\n  function createNewBoard(click = null) {\n    const grid = [];\n    const rows = width;\n    const columns = height;\n    const minesCount = mines;\n    const minesArray = getRandomMines(minesCount, columns, rows, click);\n    for (let i = 0; i < columns; ++i) {\n      grid.push([]);\n      for (let j = 0; j < rows; ++j) {\n        const gridCell = new GridCell(i, j, minesArray.includes(i * rows + j));\n        addGridCell(grid, gridCell);\n      }\n    }\n    return grid;\n  }\n  function getRandomMines(amount, columns, rows, starter = null) {\n    const minesArray = [];\n    const limit = columns * rows;\n    const minesPool = [...Array(limit).keys()];\n    if (starter > 0 && starter < limit) {\n      minesPool.splice(starter, 1);\n    }\n    for (let i = 0; i < amount; ++i) {\n      const n = Math.floor(Math.random() * minesPool.length);\n      minesArray.push(...minesPool.splice(n, 1));\n    }\n    return minesArray;\n  }\n  function addGridCell(grid, gridCell) {\n    const y = grid.length - 1;\n    const x = grid[y].length;\n    const lastGridCell = gridCell;\n    const neighbours = getNeighbours(grid, y, x);\n    for (let neighbourGridCell of neighbours) {\n      if (lastGridCell.isMine) {\n        neighbourGridCell.n += 1;\n      } else if (neighbourGridCell.isMine) {\n        lastGridCell.n += 1;\n      }\n    }\n    grid[y].push(gridCell);\n  }\n  function revealBoard() {\n    const updatedGrid = grid.map(row => row.map(gridCell => {\n      gridCell.isRevealed = true;\n      return gridCell;\n    }));\n    setGrid(updatedGrid);\n  }\n  function restartBoard() {\n    setGrid(getInitialState());\n  }\n  function getNeighbours(grid, y, x) {\n    const neighbours = [];\n    const currentRow = grid[y];\n    const prevRow = grid[y - 1];\n    const nextRow = grid[y + 1];\n    if (currentRow[x - 1]) neighbours.push(currentRow[x - 1]);\n    if (currentRow[x + 1]) neighbours.push(currentRow[x + 1]);\n    if (prevRow) {\n      if (prevRow[x - 1]) neighbours.push(prevRow[x - 1]);\n      if (prevRow[x]) neighbours.push(prevRow[x]);\n      if (prevRow[x + 1]) neighbours.push(prevRow[x + 1]);\n    }\n    if (nextRow) {\n      if (nextRow[x - 1]) neighbours.push(nextRow[x - 1]);\n      if (nextRow[x]) neighbours.push(nextRow[x]);\n      if (nextRow[x + 1]) neighbours.push(nextRow[x + 1]);\n    }\n    return neighbours;\n  }\n  function revealEmptyNeigbhours(grid, y, x) {\n    const neighbours = [...getNeighbours(grid, y, x)];\n    grid[y][x].isFlagged = false;\n    grid[y][x].isRevealed = true;\n    while (neighbours.length) {\n      const neighbourGridCell = neighbours.shift();\n      if (neighbourGridCell.isRevealed) {\n        continue;\n      }\n      if (neighbourGridCell.isEmpty) {\n        neighbours.push(...getNeighbours(grid, neighbourGridCell.y, neighbourGridCell.x));\n      }\n      neighbourGridCell.isFlagegd = false;\n      neighbourGridCell.isRevealed = true;\n    }\n  }\n  function checkVictory() {\n    const revealed = getRevealed();\n    if (revealed >= height * width - mines) {\n      killBoard(\"win\");\n    }\n  }\n  function getRevealed() {\n    return grid.reduce((r, v) => {\n      r.push(...v);\n      return r;\n    }, []).map(v => v.isRevealed).filter(v => !!v).length;\n  }\n  function killBoard(type) {\n    const message = type === \"lost\" ? \"You lost.\" : \"You won.\";\n    setGrid(prevGrid => {\n      const updatedGrid = prevGrid.map(row => row.map(gridCell => {\n        gridCell.isRevealed = true;\n        return gridCell;\n      }));\n      return {\n        ...prevGrid,\n        gameStatus: message,\n        grid: updatedGrid\n      };\n    });\n  }\n  function handleLeftClick(y, x) {\n    const updatedGrid = [...grid];\n    const gridCell = updatedGrid[y][x];\n    gridCell.isClicked = true;\n    if (gridCell.isRevealed || gridCell.isFlagged) {\n      return false;\n    }\n    if (gridCell.isMine) {\n      killBoard(\"lost\");\n      return false;\n    }\n    if (gridCell.isEmpty) {\n      revealEmptyNeigbhours(updatedGrid, y, x);\n    }\n    gridCell.isFlagged = false;\n    gridCell.isRevealed = true;\n    setGrid(updatedGrid, () => {\n      checkVictory();\n    });\n  }\n  function handleRightClick(e, y, x) {\n    e.preventDefault();\n    const updatedGrid = [...grid];\n    let minesLeft = grid.minesCount;\n    if (updatedGrid[y][x].isRevealed) return false;\n    if (updatedGrid[y][x].isFlagged) {\n      updatedGrid[y][x].isFlagged = false;\n      minesLeft++;\n    } else {\n      updatedGrid[y][x].isFlagged = true;\n      minesLeft--;\n    }\n    setGrid(prevGrid => ({\n      ...prevGrid,\n      minesCount: minesLeft,\n      grid: updatedGrid\n    }));\n  }\n  function renderBoard() {\n    return grid.map(row => {\n      const rowCells = row.map(gridCell => /*#__PURE__*/_jsxDEV(Cell, {\n        onClick: () => handleLeftClick(gridCell.y, gridCell.x),\n        cMenu: e => handleRightClick(e, gridCell.y, gridCell.x),\n        value: gridCell\n      }, gridCell.y * row.length + gridCell.x, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this));\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: rowCells\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 14\n      }, this);\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"board\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mines-count\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Mines: \", grid.minesCount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid\",\n      children: renderBoard()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 230,\n    columnNumber: 5\n  }, this);\n}\n_s(Board, \"Srxw5kAkFnXYpteUUzd7ZNNTdBg=\");\n_c = Board;\nfunction GridCell(y, x, isMine) {\n  this.x = x;\n  this.y = y;\n  this.n = 0;\n  this.isMine = isMine;\n  this.isRevealed = false;\n  this.isFlagged = false;\n  this.isUnknown = false;\n  this.isClicked = false;\n}\n_c2 = GridCell;\nBoard.propTypes = {\n  height: PropTypes.number,\n  width: PropTypes.number,\n  mines: PropTypes.number,\n  gameStatus: PropTypes.number\n};\nexport default Board;\nvar _c, _c2;\n$RefreshReg$(_c, \"Board\");\n$RefreshReg$(_c2, \"GridCell\");","map":{"version":3,"names":["React","useState","useEffect","PropTypes","Cell","jsxDEV","_jsxDEV","Board","height","width","mines","gameStatus","_s","grid","setGrid","getInitialState","initialState","createNewBoard","minesCount","revealedCells","click","rows","columns","minesArray","getRandomMines","i","push","j","gridCell","GridCell","includes","addGridCell","amount","starter","limit","minesPool","Array","keys","splice","n","Math","floor","random","length","y","x","lastGridCell","neighbours","getNeighbours","neighbourGridCell","isMine","revealBoard","updatedGrid","map","row","isRevealed","restartBoard","currentRow","prevRow","nextRow","revealEmptyNeigbhours","isFlagged","shift","isEmpty","isFlagegd","checkVictory","revealed","getRevealed","killBoard","reduce","r","v","filter","type","message","prevGrid","handleLeftClick","isClicked","handleRightClick","e","preventDefault","minesLeft","renderBoard","rowCells","onClick","cMenu","value","fileName","_jsxFileName","lineNumber","columnNumber","className","children","_c","isUnknown","_c2","propTypes","number","$RefreshReg$"],"sources":["/Users/jasminezeng/Downloads/jasmine_ironfly/my-app/src/components/Board.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Cell from \"./Cell\";\n\nfunction Board({ height, width, mines, gameStatus }) {\n  const [grid, setGrid] = useState(getInitialState());\n\n  useEffect(() => {\n    setGrid(getInitialState());\n  }, [height, width, mines, gameStatus]);\n\n  function getInitialState() {\n    const initialState = {\n      grid: createNewBoard(),\n      minesCount: mines,\n      gameStatus: gameStatus,\n      revealedCells: 0\n    };\n    return initialState;\n  }\n\n  function createNewBoard(click = null) {\n    const grid = [];\n    const rows = width;\n    const columns = height;\n    const minesCount = mines;\n    const minesArray = getRandomMines(minesCount, columns, rows, click);\n\n    for (let i = 0; i < columns; ++i) {\n      grid.push([]);\n      for (let j = 0; j < rows; ++j) {\n        const gridCell = new GridCell(i, j, minesArray.includes(i * rows + j));\n        addGridCell(grid, gridCell);\n      }\n    }\n\n    return grid;\n  }\n\n  function getRandomMines(amount, columns, rows, starter = null) {\n    const minesArray = [];\n    const limit = columns * rows;\n    const minesPool = [...Array(limit).keys()];\n\n    if (starter > 0 && starter < limit) {\n      minesPool.splice(starter, 1);\n    }\n\n    for (let i = 0; i < amount; ++i) {\n      const n = Math.floor(Math.random() * minesPool.length);\n      minesArray.push(...minesPool.splice(n, 1));\n    }\n\n    return minesArray;\n  }\n\n  function addGridCell(grid, gridCell) {\n    const y = grid.length - 1;\n    const x = grid[y].length;\n    const lastGridCell = gridCell;\n    const neighbours = getNeighbours(grid, y, x);\n\n    for (let neighbourGridCell of neighbours) {\n      if (lastGridCell.isMine) {\n        neighbourGridCell.n += 1;\n      } else if (neighbourGridCell.isMine) {\n        lastGridCell.n += 1;\n      }\n    }\n\n    grid[y].push(gridCell);\n  }\n\n  function revealBoard() {\n    const updatedGrid = grid.map(row =>\n      row.map(gridCell => {\n        gridCell.isRevealed = true;\n        return gridCell;\n      })\n    );\n\n    setGrid(updatedGrid);\n  }\n\n  function restartBoard() {\n    setGrid(getInitialState());\n  }\n\n  function getNeighbours(grid, y, x) {\n    const neighbours = [];\n    const currentRow = grid[y];\n    const prevRow = grid[y - 1];\n    const nextRow = grid[y + 1];\n\n    if (currentRow[x - 1]) neighbours.push(currentRow[x - 1]);\n    if (currentRow[x + 1]) neighbours.push(currentRow[x + 1]);\n    if (prevRow) {\n      if (prevRow[x - 1]) neighbours.push(prevRow[x - 1]);\n      if (prevRow[x]) neighbours.push(prevRow[x]);\n      if (prevRow[x + 1]) neighbours.push(prevRow[x + 1]);\n    }\n    if (nextRow) {\n      if (nextRow[x - 1]) neighbours.push(nextRow[x - 1]);\n      if (nextRow[x]) neighbours.push(nextRow[x]);\n      if (nextRow[x + 1]) neighbours.push(nextRow[x + 1]);\n    }\n\n    return neighbours;\n  }\n\n  function revealEmptyNeigbhours(grid, y, x) {\n    const neighbours = [...getNeighbours(grid, y, x)];\n    grid[y][x].isFlagged = false;\n    grid[y][x].isRevealed = true;\n\n    while (neighbours.length) {\n      const neighbourGridCell = neighbours.shift();\n\n      if (neighbourGridCell.isRevealed) {\n        continue;\n      }\n      if (neighbourGridCell.isEmpty) {\n        neighbours.push(\n          ...getNeighbours(grid, neighbourGridCell.y, neighbourGridCell.x)\n        );\n      }\n\n      neighbourGridCell.isFlagegd = false;\n      neighbourGridCell.isRevealed = true;\n    }\n  }\n\n  function checkVictory() {\n    const revealed = getRevealed();\n\n    if (revealed >= height * width - mines) {\n      killBoard(\"win\");\n    }\n  }\n\n  function getRevealed() {\n    return grid\n      .reduce((r, v) => {\n        r.push(...v);\n        return r;\n      }, [])\n      .map(v => v.isRevealed)\n      .filter(v => !!v).length;\n  }\n\n  function killBoard(type) {\n    const message = type === \"lost\" ? \"You lost.\" : \"You won.\";\n\n    setGrid(prevGrid => {\n      const updatedGrid = prevGrid.map(row =>\n        row.map(gridCell => {\n          gridCell.isRevealed = true;\n          return gridCell;\n        })\n      );\n      return { ...prevGrid, gameStatus: message, grid: updatedGrid };\n    });\n  }\n\n  function handleLeftClick(y, x) {\n    const updatedGrid = [...grid];\n    const gridCell = updatedGrid[y][x];\n\n    gridCell.isClicked = true;\n\n    if (gridCell.isRevealed || gridCell.isFlagged) {\n      return false;\n    }\n\n    if (gridCell.isMine) {\n      killBoard(\"lost\");\n      return false;\n    }\n\n    if (gridCell.isEmpty) {\n      revealEmptyNeigbhours(updatedGrid, y, x);\n    }\n\n    gridCell.isFlagged = false;\n    gridCell.isRevealed = true;\n\n    setGrid(updatedGrid, () => {\n      checkVictory();\n    });\n  }\n\n  function handleRightClick(e, y, x) {\n    e.preventDefault();\n    const updatedGrid = [...grid];\n    let minesLeft = grid.minesCount;\n\n    if (updatedGrid[y][x].isRevealed) return false;\n\n    if (updatedGrid[y][x].isFlagged) {\n      updatedGrid[y][x].isFlagged = false;\n      minesLeft++;\n    } else {\n      updatedGrid[y][x].isFlagged = true;\n      minesLeft--;\n    }\n\n    setGrid(prevGrid => ({\n      ...prevGrid,\n      minesCount: minesLeft,\n      grid: updatedGrid\n    }));\n  }\n\n  function renderBoard() {\n    return grid.map(row => {\n      const rowCells = row.map(gridCell => (\n        <Cell\n          key={gridCell.y * row.length + gridCell.x}\n          onClick={() => handleLeftClick(gridCell.y, gridCell.x)}\n          cMenu={e => handleRightClick(e, gridCell.y, gridCell.x)}\n          value={gridCell}\n        />\n      ));\n\n      return <div className=\"row\">{rowCells}</div>;\n    });\n  }\n\n  return (\n    <div className=\"board\">\n      <div className=\"mines-count\">\n        <span>Mines: {grid.minesCount}</span>\n      </div>\n      <div className=\"grid\">{renderBoard()}</div>\n    </div>\n  );\n}\n\nfunction GridCell(y, x, isMine) {\n  this.x = x;\n  this.y = y;\n  this.n = 0;\n  this.isMine = isMine;\n  this.isRevealed = false;\n  this.isFlagged = false;\n  this.isUnknown = false;\n  this.isClicked = false;\n}\n\nBoard.propTypes = {\n  height: PropTypes.number,\n  width: PropTypes.number,\n  mines: PropTypes.number,\n  gameStatus: PropTypes.number\n};\n\nexport default Board;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}